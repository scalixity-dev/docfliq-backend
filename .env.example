# Docfliq Backend — copy to .env and fill values
# Used by docker-compose and local runs

# -----------------------------------------------------------------------------
# PostgreSQL (per-service or single instance with multiple DBs)
# -----------------------------------------------------------------------------
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=docfliq
POSTGRES_PASSWORD=changeme

# Per-service DB names (or same host with different databases)
IDENTITY_DATABASE_URL=postgresql+asyncpg://docfliq:changeme@localhost:5432/identity_db
CONTENT_DATABASE_URL=postgresql+asyncpg://docfliq:changeme@localhost:5432/content_db
COURSE_DATABASE_URL=postgresql+asyncpg://docfliq:changeme@localhost:5432/course_db
PAYMENT_DATABASE_URL=postgresql+asyncpg://docfliq:changeme@localhost:5432/payment_db
PLATFORM_DATABASE_URL=postgresql+asyncpg://docfliq:changeme@localhost:5432/platform_db
MEDIA_DATABASE_URL=postgresql+asyncpg://docfliq:changeme@localhost:5432/media_db

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379/0

# -----------------------------------------------------------------------------
# JWT / Identity (shared auth)
# -----------------------------------------------------------------------------
JWT_SECRET=your-jwt-secret-change-in-production
JWT_ALGORITHM=HS256
JWT_ISSUER=docfliq-identity
JWT_AUDIENCE=docfliq-services

# -----------------------------------------------------------------------------
# SMTP (primary email — CiNet / Postal)
# -----------------------------------------------------------------------------
SMTP_HOST=
SMTP_PORT=25
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=
SMTP_FROM_NAME=DOCFLIQ
SMTP_START_TLS=true

# -----------------------------------------------------------------------------
# Brevo (fallback email provider)
# -----------------------------------------------------------------------------
BREVO_API_KEY=
BREVO_FROM_EMAIL=noreply@docfliq.com
BREVO_FROM_NAME=DOCFLIQ

# -----------------------------------------------------------------------------
# Twilio Verify (OTP via SMS — identity service)
# Leave empty to disable SMS (OTP stored locally in Redis, no SMS sent).
# -----------------------------------------------------------------------------
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_VERIFY_SERVICE_SID=

# -----------------------------------------------------------------------------
# AWS (S3, SQS, SNS, IVS, etc.)
# -----------------------------------------------------------------------------
AWS_REGION=ap-south-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
S3_BUCKET_MEDIA=docfliq-user-content-dev
# Bucket used by identity service for verification document uploads (presigned PUT/GET)
S3_BUCKET=docfliq-user-content-dev
SQS_QUEUE_EVENTS=https://sqs.ap-south-1.amazonaws.com/123456789/docfliq-events
# For local dev, optional LocalStack
# AWS_ENDPOINT_URL=http://localhost:4566

# -----------------------------------------------------------------------------
# AWS MediaConvert (MS-5 — video transcoding)
# Get endpoint: aws mediaconvert describe-endpoints --region ap-south-1
# Get role ARN: aws iam get-role --role-name docfliq-mediaconvert
# -----------------------------------------------------------------------------
MEDIACONVERT_ENDPOINT=
MEDIACONVERT_ROLE_ARN=
MEDIACONVERT_QUEUE_ARN=
MEDIACONVERT_OUTPUT_BUCKET=docfliq-user-content-dev

# -----------------------------------------------------------------------------
# CloudFront (production — signed URLs for paid content)
# Leave empty for development — S3 presigned URLs will be used instead.
# See services/media/AWS.md for setup instructions.
# -----------------------------------------------------------------------------
CLOUDFRONT_DOMAIN=
CLOUDFRONT_KEY_PAIR_ID=
CLOUDFRONT_PRIVATE_KEY=

# -----------------------------------------------------------------------------
# Razorpay (Payment service)
# -----------------------------------------------------------------------------
RAZORPAY_KEY_ID=
RAZORPAY_KEY_SECRET=

# -----------------------------------------------------------------------------
# App (CORS, docs, env name)
# -----------------------------------------------------------------------------
ENV_NAME=development
CORS_ORIGINS=http://localhost:3000,http://localhost:8080
DOCS_URL=/docs
REDOC_URL=/redoc
# Base URL of the frontend app — used to build email verification links
APP_BASE_URL=http://localhost:3000
